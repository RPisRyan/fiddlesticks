var startServer = function () {
    var express = require("express");
    var bodyParser = require("body-parser");
    var aws = require("aws-sdk");
    var http = require("http");
    var path = require("path");
    var app = express();
    var AWS_ACCESS_KEY = process.env.AWS_ACCESS_KEY;
    var AWS_SECRET_KEY = process.env.AWS_SECRET_KEY;
    var S3_BUCKET = process.env.S3_BUCKET;
    app.use(bodyParser.json());
    app.set("port", (process.env.PORT || 7702));
    var sitePath = path.join(__dirname, "../../site");
    app.use("/css", express.static(path.join(sitePath, "css")));
    app.use("/fonts", express.static(path.join(sitePath, "fonts")));
    app.use("/lib", express.static(path.join(sitePath, "lib")));
    app.use("/img", express.static(path.join(sitePath, "img")));
    app.use("/content", express.static(path.join(sitePath, "content")));
    app.get("/", function (req, res) {
        res.sendFile(path.join(sitePath, "index.html"));
    });
    app.get("/sketch", function (req, res) {
        res.sendFile(path.join(sitePath, "sketch.html"));
    });
    app.get("/sketch/*", function (req, res) {
        res.sendFile(path.join(sitePath, "sketch.html"));
    });
    app.get("/demo", function (req, res) {
        res.sendFile(path.join(sitePath, "demo.html"));
    });
    app.get("/build", function (req, res) {
        res.sendFile(path.join(sitePath, "builder.html"));
    });
    var storageConfigIsValid = S3_BUCKET && AWS_ACCESS_KEY && AWS_SECRET_KEY;
    app.get("/api/storage/access", function (req, res) {
        if (!storageConfigIsValid) {
            res.status(503).send('Storage not configured');
            return;
        }
        aws.config.update({ accessKeyId: AWS_ACCESS_KEY, secretAccessKey: AWS_SECRET_KEY });
        var s3 = new aws.S3();
        var s3params = {
            Bucket: S3_BUCKET,
            Key: req.query.fileName,
            Expires: 4000,
            ContentType: req.query.fileType,
            ACL: "public-read"
        };
        s3.getSignedUrl("putObject", s3params, function (err, data) {
            if (err) {
                console.log(err);
            }
            else {
                var returnData = {
                    signedRequest: data,
                    url: "https://" + S3_BUCKET + ".s3.amazonaws.com/" + req.query.fileName
                };
                res.type("application/json");
                res.write(JSON.stringify(returnData));
                res.end();
            }
        });
    });
    app.get("/api/storage/url", function (req, res) {
        if (!storageConfigIsValid) {
            res.status(503).send('Storage not configured');
            return;
        }
        var returnData = {
            url: "https://" + S3_BUCKET + ".s3.amazonaws.com/" + req.query.fileName
        };
        res.type("application/json");
        res.write(JSON.stringify(returnData));
        res.end();
    });
    app.post('/api/client-errors', function (req, res) {
        console.error("[client]", req.body);
        res.end();
    });
    app.listen(app.get("port"), function () {
        console.log("Node app is running on port", app.get("port"));
    });
};
startServer();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvc2VydmVyLmpzIiwiLi4vc3JjL3pfc3RhcnQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsSUFBSSxXQUFXLEdBQUc7SUFFZCxJQUFJLE9BQU8sR0FBRyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUE7SUFDaEMsSUFBSSxVQUFVLEdBQUcsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFBO0lBQ3ZDLElBQUksR0FBRyxHQUFHLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQTtJQUM1QixJQUFJLElBQUksR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUE7SUFDMUIsSUFBSSxJQUFJLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFBO0lBRTFCLElBQUksR0FBRyxHQUFHLE9BQU8sRUFBRSxDQUFBO0lBRW5CLElBQUksY0FBYyxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUMsY0FBYyxDQUFBO0lBQy9DLElBQUksY0FBYyxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUMsY0FBYyxDQUFBO0lBQy9DLElBQUksU0FBUyxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFBO0lBRXJDLEdBQUcsQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUE7SUFFMUIsR0FBRyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFBO0lBRTNDLElBQUksUUFBUSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLFlBQVksQ0FBQyxDQUFBO0lBRWpELEdBQUcsQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFBO0lBQzNELEdBQUcsQ0FBQyxH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QUFFLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQTtRQUNuQyxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUE7SUFDYixDQUFDLENBQUMsQ0FBQTtJQUVGLEdBQUcsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsRUFBRTtRQUN4QixPQUFPLENBQUMsR0FBRyxDQUFDLDZCQUE2QixFQUFFLEdBQUcsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQTtJQUMvRCxDQUFDLENBQUMsQ0FBQTtBQUVOLENBQUMsQ0FBQTtBQ2xHRCxXQUFXLEVBQUUsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIlxudmFyIHN0YXJ0U2VydmVyID0gZnVuY3Rpb24gKCkge1xuXG4gICAgdmFyIGV4cHJlc3MgPSByZXF1aXJlKFwiZXhwcmVzc1wiKVxuICAgIHZhciBib2R5UGFyc2VyID0gcmVxdWlyZShcImJvZHktcGFyc2VyXCIpXG4gICAgdmFyIGF3cyA9IHJlcXVpcmUoXCJhd3Mtc2RrXCIpXG4gICAgdmFyIGh0dHAgPSByZXF1aXJlKFwiaHR0cFwiKVxuICAgIHZhciBwYXRoID0gcmVxdWlyZShcInBhdGhcIilcblxuICAgIHZhciBhcHAgPSBleHByZXNzKClcblxuICAgIHZhciBBV1NfQUNDRVNTX0tFWSA9IHByb2Nlc3MuZW52LkFXU19BQ0NFU1NfS0VZXG4gICAgdmFyIEFXU19TRUNSRVRfS0VZID0gcHJvY2Vzcy5lbnYuQVdTX1NFQ1JFVF9LRVlcbiAgICB2YXIgUzNfQlVDS0VUID0gcHJvY2Vzcy5lbnYuUzNfQlVDS0VUXG5cbiAgICBhcHAudXNlKGJvZHlQYXJzZXIuanNvbigpKVxuXG4gICAgYXBwLnNldChcInBvcnRcIiwgKHByb2Nlc3MuZW52LlBPUlQgfHwgNzcwMikpXG5cbiAgICB2YXIgc2l0ZVBhdGggPSBwYXRoLmpvaW4oX19kaXJuYW1lLCBcIi4uLy4uL3NpdGVcIilcblxuICAgIGFwcC51c2UoXCIvY3NzXCIsIGV4cHJlc3Muc3RhdGljKHBhdGguam9pbihzaXRlUGF0aCwgXCJjc3NcIikpKVxuICAgIGFwcC51c2UoXCIvZm9udHNcIiwgZXhwcmVzcy5zdGF0aWMocGF0aC5qb2luKHNpdGVQYXRoLCBcImZvbnRzXCIpKSlcbiAgICBhcHAudXNlKFwiL2xpYlwiLCBleHByZXNzLnN0YXRpYyhwYXRoLmpvaW4oc2l0ZVBhdGgsIFwibGliXCIpKSlcbiAgICBhcHAudXNlKFwiL2ltZ1wiLCBleHByZXNzLnN0YXRpYyhwYXRoLmpvaW4oc2l0ZVBhdGgsIFwiaW1nXCIpKSlcbiAgICBhcHAudXNlKFwiL2NvbnRlbnRcIiwgZXhwcmVzcy5zdGF0aWMocGF0aC5qb2luKHNpdGVQYXRoLCBcImNvbnRlbnRcIikpKVxuXG4gICAgYXBwLmdldChcIi9cIiwgZnVuY3Rpb24gKHJlcSwgcmVzKSB7XG4gICAgICAgIHJlcy5zZW5kRmlsZShwYXRoLmpvaW4oc2l0ZVBhdGgsIFwiaW5kZXguaHRtbFwiKSlcbiAgICB9KVxuICAgIGFwcC5nZXQoXCIvc2tldGNoXCIsIGZ1bmN0aW9uIChyZXEsIHJlcykge1xuICAgICAgICByZXMuc2VuZEZpbGUocGF0aC5qb2luKHNpdGVQYXRoLCBcInNrZXRjaC5odG1sXCIpKVxuICAgIH0pXG4gICAgYXBwLmdldChcIi9za2V0Y2gvKlwiLCBmdW5jdGlvbiAocmVxLCByZXMpIHtcbiAgICAgICAgcmVzLnNlbmRGaWxlKHBhdGguam9pbihzaXRlUGF0aCwgXCJza2V0Y2guaHRtbFwiKSlcbiAgICB9KVxuICAgIGFwcC5nZXQoXCIvZGVtb1wiLCBmdW5jdGlvbiAocmVxLCByZXMpIHtcbiAgICAgICAgcmVzLnNlbmRGaWxlKHBhdGguam9pbihzaXRlUGF0aCwgXCJkZW1vLmh0bWxcIikpXG4gICAgfSlcbiAgICBhcHAuZ2V0KFwiL2J1aWxkXCIsIGZ1bmN0aW9uIChyZXEsIHJlcykge1xuICAgICAgICByZXMuc2VuZEZpbGUocGF0aC5qb2luKHNpdGVQYXRoLCBcImJ1aWxkZXIuaHRtbFwiKSlcbiAgICB9KVxuXG4gICAgY29uc3Qgc3RvcmFnZUNvbmZpZ0lzVmFsaWQgPSBTM19CVUNLRVQgJiYgQVdTX0FDQ0VTU19LRVkgJiYgQVdTX1NFQ1JFVF9LRVlcblxuICAgIGFwcC5nZXQoXCIvYXBpL3N0b3JhZ2UvYWNjZXNzXCIsIGZ1bmN0aW9uIChyZXEsIHJlcykge1xuICAgICAgICBpZiAoIXN0b3JhZ2VDb25maWdJc1ZhbGlkKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDUwMykuc2VuZCgnU3RvcmFnZSBub3QgY29uZmlndXJlZCcpXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIGF3cy5jb25maWcudXBkYXRlKHsgYWNjZXNzS2V5SWQ6IEFXU19BQ0NFU1NfS0VZLCBzZWNyZXRBY2Nlc3NLZXk6IEFXU19TRUNSRVRfS0VZIH0pXG4gICAgICAgIHZhciBzMyA9IG5ldyBhd3MuUzMoKVxuICAgICAgICB2YXIgczNwYXJhbXMgPSB7XG4gICAgICAgICAgICBCdWNrZXQ6IFMzX0JVQ0tFVCxcbiAgICAgICAgICAgIEtleTogcmVxLnF1ZXJ5LmZpbGVOYW1lLFxuICAgICAgICAgICAgRXhwaXJlczogNDAwMCwgLy8gb3ZlciAxIGhvdXJcbiAgICAgICAgICAgIENvbnRlbnRUeXBlOiByZXEucXVlcnkuZmlsZVR5cGUsXG4gICAgICAgICAgICBBQ0w6IFwicHVibGljLXJlYWRcIlxuICAgICAgICB9XG4gICAgICAgIHMzLmdldFNpZ25lZFVybChcInB1dE9iamVjdFwiLCBzM3BhcmFtcywgZnVuY3Rpb24gKGVyciwgZGF0YSkge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciByZXR1cm5EYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICBzaWduZWRSZXF1ZXN0OiBkYXRhLFxuICAgICAgICAgICAgICAgICAgICB1cmw6IFwiaHR0cHM6Ly9cIiArIFMzX0JVQ0tFVCArIFwiLnMzLmFtYXpvbmF3cy5jb20vXCIgKyByZXEucXVlcnkuZmlsZU5hbWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzLnR5cGUoXCJhcHBsaWNhdGlvbi9qc29uXCIpXG4gICAgICAgICAgICAgICAgcmVzLndyaXRlKEpTT04uc3RyaW5naWZ5KHJldHVybkRhdGEpKVxuICAgICAgICAgICAgICAgIHJlcy5lbmQoKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH0pXG5cbiAgICBhcHAuZ2V0KFwiL2FwaS9zdG9yYWdlL3VybFwiLCBmdW5jdGlvbiAocmVxLCByZXMpIHtcbiAgICAgICAgaWYgKCFzdG9yYWdlQ29uZmlnSXNWYWxpZCkge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg1MDMpLnNlbmQoJ1N0b3JhZ2Ugbm90IGNvbmZpZ3VyZWQnKVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcmV0dXJuRGF0YSA9IHtcbiAgICAgICAgICAgIHVybDogXCJodHRwczovL1wiICsgUzNfQlVDS0VUICsgXCIuczMuYW1hem9uYXdzLmNvbS9cIiArIHJlcS5xdWVyeS5maWxlTmFtZVxuICAgICAgICB9XG4gICAgICAgIHJlcy50eXBlKFwiYXBwbGljYXRpb24vanNvblwiKVxuICAgICAgICByZXMud3JpdGUoSlNPTi5zdHJpbmdpZnkocmV0dXJuRGF0YSkpXG4gICAgICAgIHJlcy5lbmQoKVxuICAgIH0pXG5cbiAgICBhcHAucG9zdCgnL2FwaS9jbGllbnQtZXJyb3JzJywgZnVuY3Rpb24gKHJlcSwgcmVzKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJbY2xpZW50XVwiLCByZXEuYm9keSlcbiAgICAgICAgcmVzLmVuZCgpXG4gICAgfSlcblxuICAgIGFwcC5saXN0ZW4oYXBwLmdldChcInBvcnRcIiksIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJOb2RlIGFwcCBpcyBydW5uaW5nIG9uIHBvcnRcIiwgYXBwLmdldChcInBvcnRcIikpXG4gICAgfSlcblxufVxuIiwiXG5zdGFydFNlcnZlcigpO1xuIl19